<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="stylesheet" type="text/css" href="insn.css" /><meta name="generator" content="iform.xsl" /><title>ADR -- AArch32</title></head><body><table align="center"><tr><td><div class="topbar"><a href="index.html">Base Instructions</a></div></td><td><div class="topbar"><a href="fpsimdindex.html">SIMD&amp;FP Instructions</a></div></td><td><div class="topbar"><a href="a32_encindex.html">A32 Instructions by Encoding</a></div></td><td><div class="topbar"><a href="t32_encindex.html">T32 Instructions by Encoding</a></div></td><td><div class="topbar"><a href="shared_pseudocode.html">Shared Pseudocode</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><hr /><h2 class="instruction-section">ADR</h2><p id="desc">
      <p class="aml">Form PC-relative address adds an immediate value to the PC value to form a PC-relative address, and writes the result to the destination register.</p>
    </p><p id="desc">This instruction is used by the alias <a href="sub_adr.html" title="Subtract from PC">SUB (immediate, from PC)</a>.</p><p id="desc">This instruction is used by the pseudo-instruction <a href="add_adr.html" title="Add to PC">ADD (immediate, to PC)</a>.</p>
    <p class="desc">
      It has encodings from the following instruction sets:
       A32 (
      <a href="#a1">A1</a>
       and 
      <a href="#a2">A2</a>
      )
       and 
       T32 (
      <a href="#t1">T1</a>
      , 
      <a href="#t2">T2</a>
       and 
      <a href="#t3">T3</a>
      )
      .
    </p>
    <h3 class="classheading"><a name="a1" id="a1"></a>A1</h3><div class="regdiagram-32"><table class="regdiagram"><thead><tr><td>31</td><td>30</td><td>29</td><td>28</td><td>27</td><td>26</td><td>25</td><td>24</td><td>23</td><td>22</td><td>21</td><td>20</td><td>19</td><td>18</td><td>17</td><td>16</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td colspan="4" class="lr">!= 1111</td><td class="l">0</td><td>0</td><td>1</td><td class="r">0</td><td class="l">1</td><td>0</td><td class="r">0</td><td class="lr">0</td><td class="l">1</td><td>1</td><td>1</td><td class="r">1</td><td colspan="4" class="lr">Rd</td><td colspan="12" class="lr">imm12</td></tr><tr class="secondrow"><td colspan="4" class="droppedname">cond</td><td colspan="4"></td><td colspan="3"></td><td></td><td colspan="4"></td><td colspan="4"></td><td colspan="12"></td></tr></tbody></table></div><div class="encoding"><h4 class="encoding">A1</h4><p class="asm-code"><a name="ADR_A1" id="ADR_A1"></a>ADR{<a href="#c" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;c&gt;</a>}{<a href="#q" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;q&gt;</a>} <a href="#rd_1" title="General-purpose destination register (field &quot;Rd&quot;)">&lt;Rd&gt;</a>, <a href="#label_2" title="The label of an instruction or literal data item whose address is to be loaded into {syntax{&lt;Rd&gt;}}">&lt;label&gt;</a></p></div><p class="pseudocode">d = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rd);  imm32 = <a href="shared_pseudocode.html#impl-aarch32.A32ExpandImm.1" title="function: bits(32) A32ExpandImm(bits(12) imm12)">A32ExpandImm</a>(imm12);  add = TRUE;</p>
    <h3 class="classheading"><a name="a2" id="a2"></a>A2</h3><div class="regdiagram-32"><table class="regdiagram"><thead><tr><td>31</td><td>30</td><td>29</td><td>28</td><td>27</td><td>26</td><td>25</td><td>24</td><td>23</td><td>22</td><td>21</td><td>20</td><td>19</td><td>18</td><td>17</td><td>16</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td colspan="4" class="lr">!= 1111</td><td class="l">0</td><td>0</td><td>1</td><td class="r">0</td><td class="l">0</td><td>1</td><td class="r">0</td><td class="lr">0</td><td class="l">1</td><td>1</td><td>1</td><td class="r">1</td><td colspan="4" class="lr">Rd</td><td colspan="12" class="lr">imm12</td></tr><tr class="secondrow"><td colspan="4" class="droppedname">cond</td><td colspan="4"></td><td colspan="3"></td><td></td><td colspan="4"></td><td colspan="4"></td><td colspan="12"></td></tr></tbody></table></div><div class="encoding"><h4 class="encoding">A2</h4><p class="asm-code"><a name="ADR_A2" id="ADR_A2"></a>ADR{<a href="#c" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;c&gt;</a>}{<a href="#q" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;q&gt;</a>} <a href="#rd_1" title="General-purpose destination register (field &quot;Rd&quot;)">&lt;Rd&gt;</a>, <a href="#label_2" title="The label of an instruction or literal data item whose address is to be loaded into {syntax{&lt;Rd&gt;}}">&lt;label&gt;</a></p></div><p class="pseudocode">d = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rd);  imm32 = <a href="shared_pseudocode.html#impl-aarch32.A32ExpandImm.1" title="function: bits(32) A32ExpandImm(bits(12) imm12)">A32ExpandImm</a>(imm12);  add = FALSE;</p>
    <h3 class="classheading"><a name="t1" id="t1"></a>T1</h3><div class="regdiagram-16"><table class="regdiagram"><thead><tr><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td class="l">1</td><td>0</td><td>1</td><td class="r">0</td><td class="lr">0</td><td colspan="3" class="lr">Rd</td><td colspan="8" class="lr">imm8</td></tr></tbody></table></div><div class="encoding"><h4 class="encoding">T1</h4><p class="asm-code"><a name="ADR_T1" id="ADR_T1"></a>ADR{<a href="#c" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;c&gt;</a>}{<a href="#q" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;q&gt;</a>} <a href="#rd" title="General-purpose destination register (field &quot;Rd&quot;)">&lt;Rd&gt;</a>, <a href="#label" title="The label of an instruction or literal data item whose address is to be loaded into {syntax{&lt;Rd&gt;}}">&lt;label&gt;</a></p></div><p class="pseudocode">d = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rd);  imm32 = <a href="shared_pseudocode.html#impl-shared.ZeroExtend.2" title="function: bits(N) ZeroExtend(bits(M) x, integer N)">ZeroExtend</a>(imm8:'00', 32);  add = TRUE;</p>
    <h3 class="classheading"><a name="t2" id="t2"></a>T2</h3><div class="regdiagram-16x2"><table class="regdiagram"><thead><tr><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td class="l">1</td><td>1</td><td>1</td><td>1</td><td class="r">0</td><td class="lr">i</td><td class="l">1</td><td class="r">0</td><td class="lr">1</td><td class="lr">0</td><td class="lr">1</td><td class="lr">0</td><td class="l">1</td><td>1</td><td>1</td><td class="r">1</td><td class="lr">0</td><td colspan="3" class="lr">imm3</td><td colspan="4" class="lr">Rd</td><td colspan="8" class="lr">imm8</td></tr></tbody></table></div><div class="encoding"><h4 class="encoding">T2</h4><p class="asm-code"><a name="ADR_T2" id="ADR_T2"></a>ADR{<a href="#c" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;c&gt;</a>}{<a href="#q" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;q&gt;</a>} <a href="#rd" title="General-purpose destination register (field &quot;Rd&quot;)">&lt;Rd&gt;</a>, <a href="#label_1" title="The label of an instruction or literal data item whose address is to be loaded into {syntax{&lt;Rd&gt;}}">&lt;label&gt;</a></p></div><p class="pseudocode">d = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rd);  imm32 = <a href="shared_pseudocode.html#impl-shared.ZeroExtend.2" title="function: bits(N) ZeroExtend(bits(M) x, integer N)">ZeroExtend</a>(i:imm3:imm8, 32);  add = FALSE;
if d == 15 then UNPREDICTABLE;     // Armv8-A removes UNPREDICTABLE for R13</p>
    <h3 class="classheading"><a name="t3" id="t3"></a>T3</h3><div class="regdiagram-16x2"><table class="regdiagram"><thead><tr><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td class="l">1</td><td>1</td><td>1</td><td>1</td><td class="r">0</td><td class="lr">i</td><td class="l">1</td><td class="r">0</td><td class="lr">0</td><td class="lr">0</td><td class="lr">0</td><td class="lr">0</td><td class="l">1</td><td>1</td><td>1</td><td class="r">1</td><td class="lr">0</td><td colspan="3" class="lr">imm3</td><td colspan="4" class="lr">Rd</td><td colspan="8" class="lr">imm8</td></tr></tbody></table></div><div class="encoding"><h4 class="encoding">T3</h4><p class="asm-code"><a name="ADR_T3" id="ADR_T3"></a>ADR{<a href="#c" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;c&gt;</a>}.W <a href="#rd" title="General-purpose destination register (field &quot;Rd&quot;)">&lt;Rd&gt;</a>, <a href="#label_1" title="The label of an instruction or literal data item whose address is to be loaded into {syntax{&lt;Rd&gt;}}">&lt;label&gt;</a>
        //
      
        (&lt;Rd&gt;, &lt;label&gt; can be presented in T1)
      </p><p class="asm-code"><a name="ADR_T3" id="ADR_T3"></a>ADR{<a href="#c" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;c&gt;</a>}{<a href="#q" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;q&gt;</a>} <a href="#rd" title="General-purpose destination register (field &quot;Rd&quot;)">&lt;Rd&gt;</a>, <a href="#label_1" title="The label of an instruction or literal data item whose address is to be loaded into {syntax{&lt;Rd&gt;}}">&lt;label&gt;</a></p></div><p class="pseudocode">d = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rd);  imm32 = <a href="shared_pseudocode.html#impl-shared.ZeroExtend.2" title="function: bits(N) ZeroExtend(bits(M) x, integer N)">ZeroExtend</a>(i:imm3:imm8, 32);  add = TRUE;
if d == 15 then UNPREDICTABLE;   // Armv8-A removes UNPREDICTABLE for R13</p>
  <p class="encoding-notes">
      <p class="aml">For more information about the <span class="arm-defined-word">constrained unpredictable</span> behavior, see <a class="armarm-xref" title="Reference to Armv8 ARM section">Architectural Constraints on UNPREDICTABLE behaviors</a>.</p>
    </p><h3 class="explanations">Assembler Symbols</h3><div class="explanations"><table><col class="asyn-l" /><col class="asyn-r" /><tr><td>&lt;c&gt;</td><td><a name="c" id="c"></a>
        
          <p class="aml">See <a class="armarm-xref" title="Reference to Armv8 ARM section">Standard assembler syntax fields</a>.</p>
        
      </td></tr></table><table><col class="asyn-l" /><col class="asyn-r" /><tr><td>&lt;q&gt;</td><td><a name="q" id="q"></a>
        
          <p class="aml">See <a class="armarm-xref" title="Reference to Armv8 ARM section">Standard assembler syntax fields</a>.</p>
        
      </td></tr></table><table><col class="asyn-l" /><col class="asyn-r" /><tr><td>&lt;Rd&gt;</td><td><a name="rd_1" id="rd_1"></a>
        
          
        
        
          <p class="aml">For encoding A1 and A2: is the general-purpose destination register, encoded in the "Rd" field. If the PC is used, the instruction is a branch to the address calculated by the operation. This is an interworking branch, see <a class="armarm-xref" title="Reference to Armv8 ARM section">Pseudocode description of operations on the AArch32 general-purpose registers and the PC</a>.</p>
        
      </td></tr><tr><td></td><td><a name="rd" id="rd"></a>
        
          
        
        
          <p class="aml">For encoding T1, T2 and T3: is the general-purpose destination register, encoded in the "Rd" field.</p>
        
      </td></tr></table><table><col class="asyn-l" /><col class="asyn-r" /><tr><td>&lt;label&gt;</td><td><a name="label_2" id="label_2"></a>
        
          
        
        
          <p class="aml">For encoding A1 and A2: the label of an instruction or literal data item whose address is to be loaded into &lt;Rd&gt;. The assembler calculates the required value of the offset from the Align(PC, 4) value of the <span class="asm-code">ADR</span> instruction to this label.</p>
          <p class="aml">If the offset is zero or positive, encoding A1 is used, with imm32 equal to the offset.</p>
          <p class="aml">If the offset is negative, encoding A2 is used, with imm32 equal to the size of the offset. That is, the use of encoding A2 indicates that the required offset is minus the value of imm32.</p>
          <p class="aml">Permitted values of the size of the offset are any of the constants described in <a class="armarm-xref" title="Reference to Armv8 ARM section">Modified immediate constants in A32 instructions</a>.</p>
        
      </td></tr><tr><td></td><td><a name="label" id="label"></a>
        
          
          
        
        
          <p class="aml">For encoding T1: the label of an instruction or literal data item whose address is to be loaded into &lt;Rd&gt;. The assembler calculates the required value of the offset from the Align(PC, 4) value of the <span class="asm-code">ADR</span> instruction to this label. Permitted values of the size of the offset are multiples of 4 in the range 0 to 1020.</p>
        
      </td></tr><tr><td></td><td><a name="label_1" id="label_1"></a>
        
          
        
        
          <p class="aml">For encoding T2 and T3: the label of an instruction or literal data item whose address is to be loaded into &lt;Rd&gt;. The assembler calculates the required value of the offset from the Align(PC, 4) value of the <span class="asm-code">ADR</span> instruction to this label.</p>
          <p class="aml">If the offset is zero or positive, encoding T3 is used, with imm32 equal to the offset.</p>
          <p class="aml">If the offset is negative, encoding T2 is used, with imm32 equal to the size of the offset. That is, the use of encoding T2 indicates that the required offset is minus the value of imm32.</p>
          <p class="aml">Permitted values of the size of the offset are 0-4095.</p>
        
      </td></tr></table></div><p class="syntax-notes">
      <p class="aml">The instruction aliases permit the addition or subtraction of the offset and the immediate offset to be specified separately, including permitting a subtraction of 0 that cannot be specified using the normal syntax. For more information, see <a class="armarm-xref" title="Reference to Armv8 ARM section">Use of labels in UAL instruction syntax</a>.</p>
    </p><a name="aliasconditions" id="aliasconditions"></a><h3 class="aliastable">Alias Conditions</h3><table class="aliastable"><thead><tr><th>Alias</th><th>Of variant</th><th>Is preferred when</th></tr></thead><tbody><tr><td><a href="add_adr.html" title="Add to PC">ADD (immediate, to PC)</a></td><td class="notfirst"></td><td class="notfirst"><span class="pseudocode">Never</span></td></tr><tr><td><a href="sub_adr.html" title="Subtract from PC">SUB (immediate, from PC)</a></td><td class="notfirst">T2</td><td class="notfirst"><span class="pseudocode">i:imm3:imm8 == '000000000000'</span></td></tr><tr><td><a href="sub_adr.html" title="Subtract from PC">SUB (immediate, from PC)</a></td><td class="notfirst">A2</td><td class="notfirst"><span class="pseudocode">imm12 == '000000000000'</span></td></tr></tbody></table>
    <div class="ps" psname="commonps"><a name="commonps" id="commonps"></a><h3 class="pseudocode">Operation</h3>
      <p class="pseudocode">if <a href="shared_pseudocode.html#impl-aarch32.ConditionPassed.0" title="function: boolean ConditionPassed()">ConditionPassed</a>() then
    EncodingSpecificOperations();
    result = if add then (<a href="shared_pseudocode.html#impl-shared.Align.2" title="function: integer Align(integer x, integer y)">Align</a>(PC,4) + imm32) else (<a href="shared_pseudocode.html#impl-shared.Align.2" title="function: integer Align(integer x, integer y)">Align</a>(PC,4) - imm32);
    if d == 15 then          // Can only occur for A32 encodings
        <a href="shared_pseudocode.html#impl-aarch32.ALUWritePC.1" title="function: ALUWritePC(bits(32) address)">ALUWritePC</a>(result);
    else
        <a href="shared_pseudocode.html#impl-aarch32.R.write.1" title="accessor: R[integer n] = bits(32) value">R</a>[d] = result;</p>
    </div>
  <hr /><table align="center"><tr><td><div class="topbar"><a href="index.html">Base Instructions</a></div></td><td><div class="topbar"><a href="fpsimdindex.html">SIMD&amp;FP Instructions</a></div></td><td><div class="topbar"><a href="a32_encindex.html">A32 Instructions by Encoding</a></div></td><td><div class="topbar"><a href="t32_encindex.html">T32 Instructions by Encoding</a></div></td><td><div class="topbar"><a href="shared_pseudocode.html">Shared Pseudocode</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><p class="versions">
      Internal version only: isa v00_88, pseudocode v85-xml-00bet9_rc1_1
      ; Build timestamp: 2018-12-12T12:33
    </p><p class="copyconf">
      Copyright © 2010-2018 Arm Limited or its affiliates. All rights reserved.
      This document is Non-Confidential.
    </p></body></html>
