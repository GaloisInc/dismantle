<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><link href="insn.css" rel="stylesheet" type="text/css"/><meta content="iform.xsl" name="generator"/><title>DCPS1, DCPS2, DCPS3 -- AArch32</title></head><body><div align="center" class="htmldiff_header"><table><tbody><tr><td class="old">(old) </td><td class="explain">htmldiff from-</td><td class="new">(new) </td></tr></tbody></table></div><table align="center"><tr><td><div class="topbar"><a href="index.html">Base Instructions</a></div></td><td><div class="topbar"><a href="fpsimdindex.html">SIMD&amp;FP Instructions</a></div></td><td><div class="topbar"><a href="a32_encindex.html">A32 Instructions by Encoding</a></div></td><td><div class="topbar"><a href="t32_encindex.html">T32 Instructions by Encoding</a></div></td><td><div class="topbar"><a href="shared_pseudocode.html">Shared Pseudocode</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><hr/><h2 class="instruction-section">DCPS1, DCPS2, DCPS3</h2><p id="desc"><p class="aml">DCPSx, Debug Change PE State to ELx, where x is 1, 2, or 3.</p><p class="aml">When executed in Debug state, the target Exception level of the instruction is:</p><ul><li>ELx, if the instruction is executed at an Exception level lower than ELx.</li><li>Otherwise, the Exception level at which the instruction is executed.</li></ul><p class="aml">On executing a DCPSx instruction in Debug state when the instruction is not <span class="arm-defined-word">undefined</span>:</p><ul><li>If the instruction is executed at an Exception level that is lower than the target Exception level the PE enters the target Exception level, Elx, and:<ul><li>If ELx is using AArch64, the PE selects SP_ELx.</li><li>If the target Exception level is EL1 using AArch32 the PE enters Supervisor mode.</li><li>If the instruction was executed in Non-secure state and the target Exception level is EL2 using AArch32 the PE enters Hyp mode.</li><li>If the target Exception level is EL3 using AArch32 the PE enters Supervisor mode and SCR.NS is set to 0.</li></ul></li><li>Otherwise, there is no change to the Exception level and:<ul><li>If the instruction was executed at EL1 the PE enters Supervisor mode.</li><li>If the instruction was executed at EL2 the PE remains in Hyp mode.</li><li>If the instruction was a <span class="asm-code">DCPS1</span> instruction executed at EL3 the PE enters Supervisor mode and SCR.NS is set to 0.</li><li>If the instruction was a <span class="asm-code">DCPS3</span> instruction executed at EL3 the PE enters Monitor mode and SCR.NS is set to 0.</li></ul></li></ul><p class="aml">These instructions are always <span class="arm-defined-word">undefined</span> in Non-debug state.</p><p class="aml"><span class="asm-code">DCPS1</span> is <span class="arm-defined-word">undefined</span> at EL0 <del>in Non-secure state </del>if<del> either</del>:</p><ul><li>EL2 is <ins>using</ins><del>implemented</del> <ins>AArch64 </ins>and <ins>enabled</ins><del>using</del> <ins>in the current Security state,</ins><del>AArch64</del> and HCR_EL2.TGE == 1.</li><li>EL2 is <del>implemented and </del>using AArch32<ins> in Non-Secure state,</ins> and HCR.TGE == 1.</li></ul><p class="aml"><span class="asm-code">DCPS2</span> is <span class="arm-defined-word">undefined</span> at all Exception levels if EL2 is not implemented.</p><p class="aml"><span class="asm-code">DCPS2</span> is <span class="arm-defined-word">undefined</span> in the following states if EL2 is implemented:</p><ul><li>At EL0 and EL1<ins>,</ins> <ins>when</ins><del>in</del> <ins>EL2</ins><del>Secure</del> <ins>is</ins><del>state</del> <ins>not</ins><del>if</del> <ins>enabled</ins><del>Secure</del> <ins>in</ins><del>EL2</del> <ins>the</ins><del>is</del> <ins>current Security state.</ins><del>disabled.</del></li><li>At EL3 if EL3 is using AArch32.</li></ul><p class="aml"><span class="asm-code">DCPS3</span> is <span class="arm-defined-word">undefined</span> at all Exception levels if either:</p><ul><li>EDSCR.SDD == 1.</li><li>EL3 is not implemented.</li></ul><p class="aml">On executing a DCPSx instruction that is not <span class="arm-defined-word">undefined</span> and targets ELx:</p><ul><li>If ELx is using AArch64:<ul><li>ELR_ELx, SPSR_ELx, and ESR_ELx become <span class="arm-defined-word">unknown</span>.</li><li>DLR_EL0 and DSPSR_EL0 become <span class="arm-defined-word">unknown</span>.</li></ul></li><li>If ELx is using AArch32 DLR and DSPSR become <span class="arm-defined-word">unknown</span> and:<ul><li>If the target Exception level is EL1 or EL3, the LR and SPSR of the target PE mode become <span class="arm-defined-word">unknown</span>.</li><li>If the target Exception level is EL2, then ELR_hyp, SPSR_hyp, and HSR become <span class="arm-defined-word">unknown</span>.</li></ul></li></ul><p class="aml">For more information on the operation of these instructions, see <a class="armarm-xref" title="Reference to Armv8 ARM section">DCPS</a>.</p></p><h3 class="classheading"><a id="t1" name="t1"></a>T1</h3><p class="desc"></p><div class="regdiagram-16x2"><table class="regdiagram"><thead><tr><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td class="l">1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td class="r">0</td><td class="l">1</td><td>1</td><td>1</td><td class="r">1</td><td class="l">1</td><td>0</td><td>0</td><td class="r">0</td><td class="l">0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td class="r">0</td><td class="lr" colspan="2">opt</td></tr></tbody></table></div><div class="encoding"><h4 class="encoding">DCPS1<span class="bitdiff"> (opt == 01)</span></h4><p class="asm-code"><a id="DCPS1_T1" name="DCPS1_T1"></a>DCPS1</p></div><div class="encoding"><h4 class="encoding">DCPS2<span class="bitdiff"> (opt == 10)</span></h4><p class="asm-code"><a id="DCPS2_T1" name="DCPS2_T1"></a>DCPS2</p></div><div class="encoding"><h4 class="encoding">DCPS3<span class="bitdiff"> (opt == 11)</span></h4><p class="asm-code"><a id="DCPS3_T1" name="DCPS3_T1"></a>DCPS3</p></div><p class="pseudocode">if !<a href="shared_pseudocode.html#impl-shared.Halted.0" title="function: boolean Halted()">Halted</a>() || opt == '00' then UNDEFINED;</p><p class="encoding-notes"></p><div class="ps" psname="commonps"><a id="commonps" name="commonps"></a><h3 class="pseudocode">Operation</h3><p class="pseudocode"><a href="shared_pseudocode.html#impl-shared.DCPSInstruction.1" title="function: DCPSInstruction(bits(2) target_el)">DCPSInstruction</a>(opt);</p></div><hr/><table align="center"><tr><td><div class="topbar"><a href="index.html">Base Instructions</a></div></td><td><div class="topbar"><a href="fpsimdindex.html">SIMD&amp;FP Instructions</a></div></td><td><div class="topbar"><a href="a32_encindex.html">A32 Instructions by Encoding</a></div></td><td><div class="topbar"><a href="t32_encindex.html">T32 Instructions by Encoding</a></div></td><td><div class="topbar"><a href="shared_pseudocode.html">Shared Pseudocode</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><p class="versions">
      Internal version only: isa <ins>v00_88</ins><del>v00_87</del>, pseudocode <ins>v85-xml-00bet9_rc1_1</ins><del>v85-xml-00bet8_rc3</del>
      ; Build timestamp: <ins>2018-12-12T12</ins><del>2018-09-13T14</del>:<ins>33</ins><del>00</del>
    </p><p class="copyconf">
      Copyright Â© 2010-2018 <ins>Arm</ins><del>ARM</del> Limited or its affiliates. All rights reserved.
      This document is Non-Confidential.
    </p><div align="center" class="htmldiff_header"><table><tbody><tr><td class="old">(old) </td><td class="explain">htmldiff from-</td><td class="new">(new) </td></tr></tbody></table></div></body></html>