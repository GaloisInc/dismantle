<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="stylesheet" type="text/css" href="insn.css" /><meta name="generator" content="iform.xsl" /><title>CRC32 -- AArch32</title></head><body><table align="center"><tr><td><div class="topbar"><a href="index.html">Base Instructions</a></div></td><td><div class="topbar"><a href="fpsimdindex.html">SIMD&amp;FP Instructions</a></div></td><td><div class="topbar"><a href="a32_encindex.html">A32 Instructions by Encoding</a></div></td><td><div class="topbar"><a href="t32_encindex.html">T32 Instructions by Encoding</a></div></td><td><div class="topbar"><a href="shared_pseudocode.html">Shared Pseudocode</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><hr /><h2 class="instruction-section">CRC32</h2><p id="desc">
      <p class="aml"><span class="asm-code">CRC32</span> performs a cyclic redundancy check (CRC) calculation on a value held in a general-purpose register. It takes an input CRC value in the first source operand, performs a CRC on the input value in the second source operand, and returns the output CRC value. The second source operand can be 8, 16, or 32 bits. To align with common usage, the bit order of the values is reversed as part of the operation, and the polynomial 0x04C11DB7 is used for the CRC calculation.</p>
      <p class="aml">In Armv8-A, this is an <span class="arm-defined-word">optional</span> instruction, and in Armv8.1 it is mandatory for all implementations to implement it.</p>
      
        <p class="aml"><a class="armarm-xref" title="Reference to Armv8 ARM section">ID_ISAR5</a>.CRC32 indicates whether this instruction is supported in the T32 and A32 instruction sets.</p>
      
    </p>
    <p class="desc">
      It has encodings from the following instruction sets:
       A32 (
      <a href="#a1">A1</a>
      )
       and 
       T32 (
      <a href="#t1">T1</a>
      )
      .
    </p>
    <h3 class="classheading"><a name="a1" id="a1"></a>A1</h3><p class="desc"></p><div class="regdiagram-32"><table class="regdiagram"><thead><tr><td>31</td><td>30</td><td>29</td><td>28</td><td>27</td><td>26</td><td>25</td><td>24</td><td>23</td><td>22</td><td>21</td><td>20</td><td>19</td><td>18</td><td>17</td><td>16</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td colspan="4" class="lr">!= 1111</td><td class="l">0</td><td>0</td><td>0</td><td>1</td><td class="r">0</td><td colspan="2" class="lr">sz</td><td class="lr">0</td><td colspan="4" class="lr">Rn</td><td colspan="4" class="lr">Rd</td><td class="lr">(0)</td><td class="lr">(0)</td><td class="lr">0</td><td class="lr">(0)</td><td class="l">0</td><td>1</td><td>0</td><td class="r">0</td><td colspan="4" class="lr">Rm</td></tr><tr class="secondrow"><td colspan="4" class="droppedname">cond</td><td colspan="5"></td><td colspan="2"></td><td></td><td colspan="4"></td><td colspan="4"></td><td></td><td></td><td class="droppedname">C</td><td></td><td colspan="4"></td><td colspan="4"></td></tr></tbody></table></div><div class="encoding"><h4 class="encoding">CRC32B<span class="bitdiff"> (sz == 00)</span></h4><p class="asm-code"><a name="CRC32B_A1" id="CRC32B_A1"></a>CRC32B{<a href="#q" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;q&gt;</a>} <a href="#rd" title="General-purpose accumulator output register (field &quot;Rd&quot;)">&lt;Rd&gt;</a>, <a href="#rn" title="General-purpose accumulator input register (field &quot;Rn&quot;)">&lt;Rn&gt;</a>, <a href="#rm" title="General-purpose data source register (field &quot;Rm&quot;)">&lt;Rm&gt;</a></p></div><div class="encoding"><h4 class="encoding">CRC32H<span class="bitdiff"> (sz == 01)</span></h4><p class="asm-code"><a name="CRC32H_A1" id="CRC32H_A1"></a>CRC32H{<a href="#q" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;q&gt;</a>} <a href="#rd" title="General-purpose accumulator output register (field &quot;Rd&quot;)">&lt;Rd&gt;</a>, <a href="#rn" title="General-purpose accumulator input register (field &quot;Rn&quot;)">&lt;Rn&gt;</a>, <a href="#rm" title="General-purpose data source register (field &quot;Rm&quot;)">&lt;Rm&gt;</a></p></div><div class="encoding"><h4 class="encoding">CRC32W<span class="bitdiff"> (sz == 10)</span></h4><p class="asm-code"><a name="CRC32W_A1" id="CRC32W_A1"></a>CRC32W{<a href="#q" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;q&gt;</a>} <a href="#rd" title="General-purpose accumulator output register (field &quot;Rd&quot;)">&lt;Rd&gt;</a>, <a href="#rn" title="General-purpose accumulator input register (field &quot;Rn&quot;)">&lt;Rn&gt;</a>, <a href="#rm" title="General-purpose data source register (field &quot;Rm&quot;)">&lt;Rm&gt;</a></p></div><p class="pseudocode">if ! <a href="shared_pseudocode.html#impl-shared.HaveCRCExt.0" title="function: boolean HaveCRCExt()">HaveCRCExt</a>() then UNDEFINED;
d = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rd); n = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rn); m = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rm);
size = 8 &lt;&lt; <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(sz);
crc32c = (C == '1');
if d == 15 || n == 15 || m == 15 then UNPREDICTABLE;
if size == 64 then UNPREDICTABLE;
if cond != '1110' then UNPREDICTABLE;</p><h3>CONSTRAINED UNPREDICTABLE behavior</h3><p>If <span class="pseudocode">size == 64</span>, then one of the following behaviors must occur:</p><ul><li>The instruction is <span class="arm-defined-word">undefined</span>.</li><li>The instruction executes as <span class="asm-code">NOP</span>.</li><li>The instruction executes with the additional decode: size = 32;.</li></ul><p>If <span class="pseudocode">cond != '1110'</span>, then one of the following behaviors must occur:</p><ul><li>The instruction is <span class="arm-defined-word">undefined</span>.</li><li>The instruction executes as <span class="asm-code">NOP</span>.</li><li>The instruction executes unconditionally.</li><li>The instruction executes conditionally.</li></ul>
    <h3 class="classheading"><a name="t1" id="t1"></a>T1</h3><p class="desc"></p><div class="regdiagram-16x2"><table class="regdiagram"><thead><tr><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td class="l">1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td><td class="r">1</td><td class="l">1</td><td class="r">0</td><td class="lr">0</td><td colspan="4" class="lr">Rn</td><td class="l">1</td><td>1</td><td>1</td><td class="r">1</td><td colspan="4" class="lr">Rd</td><td class="l">1</td><td class="r">0</td><td colspan="2" class="lr">sz</td><td colspan="4" class="lr">Rm</td></tr><tr class="secondrow"><td colspan="9"></td><td colspan="2"></td><td class="droppedname">C</td><td colspan="4"></td><td colspan="4"></td><td colspan="4"></td><td colspan="2"></td><td colspan="2"></td><td colspan="4"></td></tr></tbody></table></div><div class="encoding"><h4 class="encoding">CRC32B<span class="bitdiff"> (sz == 00)</span></h4><p class="asm-code"><a name="CRC32B_T1" id="CRC32B_T1"></a>CRC32B{<a href="#q" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;q&gt;</a>} <a href="#rd" title="General-purpose accumulator output register (field &quot;Rd&quot;)">&lt;Rd&gt;</a>, <a href="#rn" title="General-purpose accumulator input register (field &quot;Rn&quot;)">&lt;Rn&gt;</a>, <a href="#rm" title="General-purpose data source register (field &quot;Rm&quot;)">&lt;Rm&gt;</a></p></div><div class="encoding"><h4 class="encoding">CRC32H<span class="bitdiff"> (sz == 01)</span></h4><p class="asm-code"><a name="CRC32H_T1" id="CRC32H_T1"></a>CRC32H{<a href="#q" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;q&gt;</a>} <a href="#rd" title="General-purpose accumulator output register (field &quot;Rd&quot;)">&lt;Rd&gt;</a>, <a href="#rn" title="General-purpose accumulator input register (field &quot;Rn&quot;)">&lt;Rn&gt;</a>, <a href="#rm" title="General-purpose data source register (field &quot;Rm&quot;)">&lt;Rm&gt;</a></p></div><div class="encoding"><h4 class="encoding">CRC32W<span class="bitdiff"> (sz == 10)</span></h4><p class="asm-code"><a name="CRC32W_T1" id="CRC32W_T1"></a>CRC32W{<a href="#q" title="See {xref{ARMARM_Babbefhf}{Standard assembler syntax fields}}">&lt;q&gt;</a>} <a href="#rd" title="General-purpose accumulator output register (field &quot;Rd&quot;)">&lt;Rd&gt;</a>, <a href="#rn" title="General-purpose accumulator input register (field &quot;Rn&quot;)">&lt;Rn&gt;</a>, <a href="#rm" title="General-purpose data source register (field &quot;Rm&quot;)">&lt;Rm&gt;</a></p></div><p class="pseudocode">if <a href="shared_pseudocode.html#impl-aarch32.InITBlock.0" title="function: boolean InITBlock()">InITBlock</a>() then UNPREDICTABLE;
if ! <a href="shared_pseudocode.html#impl-shared.HaveCRCExt.0" title="function: boolean HaveCRCExt()">HaveCRCExt</a>() then UNDEFINED;
d = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rd); n = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rn); m = <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(Rm);
size = 8 &lt;&lt; <a href="shared_pseudocode.html#impl-shared.UInt.1" title="function: integer UInt(bits(N) x)">UInt</a>(sz);
crc32c = (C == '1');
if d == 15 || n == 15 || m == 15 then UNPREDICTABLE;
if size == 64 then UNPREDICTABLE;</p><h3>CONSTRAINED UNPREDICTABLE behavior</h3><p>If <span class="pseudocode">size == 64</span>, then one of the following behaviors must occur:</p><ul><li>The instruction is <span class="arm-defined-word">undefined</span>.</li><li>The instruction executes as <span class="asm-code">NOP</span>.</li><li>The instruction executes with the additional decode: size = 32;.</li></ul>
  <p class="encoding-notes">
      <p class="aml">For more information about the <span class="arm-defined-word">constrained unpredictable</span> behavior, see <a class="armarm-xref" title="Reference to Armv8 ARM section">Architectural Constraints on UNPREDICTABLE behaviors</a>.</p>
    </p><h3 class="explanations">Assembler Symbols</h3><div class="explanations"><table><col class="asyn-l" /><col class="asyn-r" /><tr><td>&lt;q&gt;</td><td><a name="q" id="q"></a>
        
          <p class="aml">See <a class="armarm-xref" title="Reference to Armv8 ARM section">Standard assembler syntax fields</a>. An <span class="asm-code">CRC32</span> instruction must be unconditional.</p>
        
      </td></tr></table><table><col class="asyn-l" /><col class="asyn-r" /><tr><td>&lt;Rd&gt;</td><td><a name="rd" id="rd"></a>
        
          <p class="aml">Is the general-purpose accumulator output register, encoded in the "Rd" field.</p>
        
      </td></tr></table><table><col class="asyn-l" /><col class="asyn-r" /><tr><td>&lt;Rn&gt;</td><td><a name="rn" id="rn"></a>
        
          <p class="aml">Is the general-purpose accumulator input register, encoded in the "Rn" field.</p>
        
      </td></tr></table><table><col class="asyn-l" /><col class="asyn-r" /><tr><td>&lt;Rm&gt;</td><td><a name="rm" id="rm"></a>
        
          <p class="aml">Is the general-purpose data source register, encoded in the "Rm" field.</p>
        
      </td></tr></table></div><p class="syntax-notes"></p>
    <div class="ps" psname="commonps"><a name="commonps" id="commonps"></a><h3 class="pseudocode">Operation</h3>
      <p class="pseudocode">if <a href="shared_pseudocode.html#impl-aarch32.ConditionPassed.0" title="function: boolean ConditionPassed()">ConditionPassed</a>() then
    EncodingSpecificOperations();

    acc = <a href="shared_pseudocode.html#impl-aarch32.R.read.1" title="accessor: bits(32) R[integer n]">R</a>[n];             // accumulator
    val = <a href="shared_pseudocode.html#impl-aarch32.R.read.1" title="accessor: bits(32) R[integer n]">R</a>[m]&lt;size-1:0&gt;;   // input value
    poly = (if crc32c then 0x1EDC6F41 else 0x04C11DB7)&lt;31:0&gt;;
    tempacc = <a href="shared_pseudocode.html#impl-shared.BitReverse.1" title="function: bits(N) BitReverse(bits(N) data)">BitReverse</a>(acc):<a href="shared_pseudocode.html#impl-shared.Zeros.1" title="function: bits(N) Zeros(integer N)">Zeros</a>(size);
    tempval = <a href="shared_pseudocode.html#impl-shared.BitReverse.1" title="function: bits(N) BitReverse(bits(N) data)">BitReverse</a>(val):<a href="shared_pseudocode.html#impl-shared.Zeros.1" title="function: bits(N) Zeros(integer N)">Zeros</a>(32);
    // Poly32Mod2 on a bitstring does a polynomial Modulus over {0,1} operation
    <a href="shared_pseudocode.html#impl-aarch32.R.write.1" title="accessor: R[integer n] = bits(32) value">R</a>[d] = <a href="shared_pseudocode.html#impl-shared.BitReverse.1" title="function: bits(N) BitReverse(bits(N) data)">BitReverse</a>(<a href="shared_pseudocode.html#impl-shared.Poly32Mod2.2" title="function: bits(32) Poly32Mod2(bits(N) data, bits(32) poly)">Poly32Mod2</a>(tempacc EOR tempval, poly));</p>
    </div>
  <h3>Operational information</h3>
    <p class="aml">If CPSR.DIT is 1 and this instruction passes its condition execution check:</p>
    <ul>
      <li>The execution time of this instruction is independent of:<ul><li>The values of the data supplied in any of its registers.</li><li>The values of the NZCV flags.</li></ul></li>
      <li>The response of this instruction to asynchronous exceptions does not vary based on:<ul><li>The values of the data supplied in any of its registers.</li><li>The values of the NZCV flags.</li></ul></li>
    </ul>
  <hr /><table align="center"><tr><td><div class="topbar"><a href="index.html">Base Instructions</a></div></td><td><div class="topbar"><a href="fpsimdindex.html">SIMD&amp;FP Instructions</a></div></td><td><div class="topbar"><a href="a32_encindex.html">A32 Instructions by Encoding</a></div></td><td><div class="topbar"><a href="t32_encindex.html">T32 Instructions by Encoding</a></div></td><td><div class="topbar"><a href="shared_pseudocode.html">Shared Pseudocode</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><p class="versions">
      Internal version only: isa v00_88, pseudocode v85-xml-00bet9_rc1_1
      ; Build timestamp: 2018-12-12T12:33
    </p><p class="copyconf">
      Copyright © 2010-2018 Arm Limited or its affiliates. All rights reserved.
      This document is Non-Confidential.
    </p></body></html>
